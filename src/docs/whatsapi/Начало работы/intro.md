–ü—Ä–∏–Ω—è—Ç–æ. –î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º ¬´–º–∞—Å—Å–∏–≤–Ω—ã–µ¬ª —Å—Ç–∞—Ç—å–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –ø–æ–º–æ–≥—É—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è¬ª, –∞ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—É—é —Å–∏—Å—Ç–µ–º—É. –Ø —Ä–∞—Å—à–∏—Ä–∏–ª –∫–æ–Ω—Ç–µ–Ω—Ç, –¥–æ–±–∞–≤–∏–ª –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

---

## üìÇ amocrm / `02_–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è_oauth.md`

### –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ OAuth 2.0 –≤ amoCRM

amoCRM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–æ–≥–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª OAuth 2.0. –ì–ª–∞–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ ‚Äî –∫–æ—Ä–æ—Ç–∫–∞—è –∂–∏–∑–Ω—å ¬´–∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏¬ª (20 –º–∏–Ω—É—Ç) –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è access-—Ç–æ–∫–µ–Ω–∞.

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:

- **ID –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (client_id)**
- **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (client_secret)**
- **–ö–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (auth_code)** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –û–î–ò–ù —Ä–∞–∑ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –ø–∞—Ä—ã —Ç–æ–∫–µ–Ω–æ–≤.

#### 2. –û–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ —Ç–æ–∫–µ–Ω—ã (PHP/Guzzle)

```php
$client = new \GuzzleHttp\Client();
$response = $client->post('https://your_subdomain.amocrm.ru/oauth2/access_token', [
    'json' => [
        'client_id' => 'xxx-xxx',
        'client_secret' => 'yyyyy',
        'grant_type' => 'authorization_code',
        'code' => 'auth_code_from_cabinet',
        'redirect_uri' => 'https://your-site.ru/callback',
    ]
]);
$data = json_decode($response->getBody(), true);
// –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ access_token –∏ refresh_token –≤ –ë–î!

```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (Cron —Å–∫—Ä–∏–ø—Ç)

`access_token` –∂–∏–≤–µ—Ç 24 —á–∞—Å–∞. –ß—Ç–æ–±—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ ¬´–ø—Ä–æ—Ç—É—Ö–ª–∞¬ª, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `refresh_token`.

- **–í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `refresh_token` —Å—Ç–∞—Ä—ã–π –∞–Ω–Ω—É–ª–∏—Ä—É–µ—Ç—Å—è, –∞ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–æ–≤—É—é –ü–ê–†–£ (–Ω–æ–≤—ã–π access + –Ω–æ–≤—ã–π refresh).

---

## üìÇ bitrix24 / `02_–æ–±—Ä–∞–±–æ—Ç–∫–∞_–ª–∏–¥–æ–≤.md`

### –ì–ª—É–±–æ–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–¥–æ–≤

–í –ë–∏—Ç—Ä–∏–∫—Å24 —Ä–∞–±–æ—Ç–∞ —Å –ª–∏–¥–∞–º–∏ —á–µ—Ä–µ–∑ REST API —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ–ª–µ–π –∏ –ø—Ä–∏–≤—è–∑–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.

#### 1. –ú–µ—Ç–æ–¥ `crm.lead.add`

–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ª–∏–¥. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å—Ä–∞–∑—É –ø—Ä–∏–≤—è–∑–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ –ø–æ—á—Ç—É, –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ `PHONE` –∏ `EMAIL`.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (Python/Requests):**

```python
import requests

webhook_url = "https://b24-domain.bitrix24.ru/rest/1/secret_key/crm.lead.add.json"
payload = {
    "fields": {
        "TITLE": "–ó–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ (–ö–≤–∏–∑)",
        "NAME": "–ò–≤–∞–Ω",
        "LAST_NAME": "–ò–≤–∞–Ω–æ–≤",
        "STATUS_ID": "NEW",
        "OPENED": "Y",
        "ASSIGNED_BY_ID": 1,
        "PHONE": [{"VALUE": "+79001112233", "VALUE_TYPE": "WORK"}],
        "EMAIL": [{"VALUE": "test@test.ru", "VALUE_TYPE": "HOME"}],
        "UTM_SOURCE": "google",
        "UF_CRM_1602155501": "–ó–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è"
    },
    "params": {"REGISTER_SONET_EVENT": "Y"} # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∂–∏–≤—É—é –ª–µ–Ω—Ç—É
}

response = requests.post(webhook_url, json=payload)
print(response.json())

```

#### 2. –ö–∞–∫ —É–∑–Ω–∞—Ç—å ID –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è?

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `CRM -> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ—Ä–º –∏ –æ—Ç—á–µ—Ç–æ–≤ -> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è`. –í —Å–ø–∏—Å–∫–µ –ø–æ–ª–µ–π –Ω–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω–æ–µ, –µ–≥–æ ID –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ `UF_CRM_XXXXXXXXXX`.

---

## üìÇ custom-integrations / `01_–æ–±—â–∏–π_–ø—Ä–∏–Ω—Ü–∏–ø.md`

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞

–ö–æ–≥–¥–∞ –≤—ã —Å—Ç—Ä–æ–∏—Ç–µ –º–æ—Å—Ç –º–µ–∂–¥—É —Å–∞–π—Ç–æ–º –∏ CRM, –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å –∏ –Ω–∞–¥–µ—è—Ç—å—Å—è –Ω–∞ –ª—É—á—à–µ–µ.

#### –≠—Ç–∞–ª–æ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö:

1. **–ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö (Webhook/Form):** –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–∞–π—Ç–∞.
2. **–û—á–µ—Ä–µ–¥—å (Queue):** –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ CRM –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ. –ü–æ–ª–æ–∂–∏—Ç–µ –∑–∞–¥–∞—á—É –≤ Redis/RabbitMQ. –≠—Ç–æ —Å–ø–∞—Å–µ—Ç —Å–∞–π—Ç –æ—Ç —Ç–æ—Ä–º–æ–∑–æ–≤, –µ—Å–ª–∏ API CRM ¬´–ø—Ä–∏–ª—è–∂–µ—Ç¬ª.
3. **Worker (–û–±—Ä–∞–±–æ—Ç—á–∏–∫):** –°–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä–µ—Ç –∑–∞–¥–∞—á—É –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ CRM.
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ RAW JSON –∑–∞–ø—Ä–æ—Å–∞ –∏ RAW JSON –æ—Ç–≤–µ—Ç–∞ CRM. –≠—Ç–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç —á–∞—Å—ã –æ—Ç–ª–∞–¥–∫–∏.

| –°—Ç–∞—Ç—É—Å                    | –î–µ–π—Å—Ç–≤–∏–µ                                                     |
| ------------------------- | ------------------------------------------------------------ |
| **200 OK**                | –ü–æ–º–µ—á–∞–µ–º –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é.                             |
| **429 Too Many Requests** | –ñ–¥–µ–º 60 —Å–µ–∫—É–Ω–¥, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–¥–∞—á—É –≤ –Ω–∞—á–∞–ª–æ –æ—á–µ—Ä–µ–¥–∏.          |
| **401 Unauthorized**      | –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç —Ä–æ—Ç–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤.                            |
| **5xx Server Error**      | –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (—á–µ—Ä–µ–∑ 5 –º–∏–Ω, –ø–æ—Ç–æ–º —á–µ—Ä–µ–∑ 30 –º–∏–Ω). |

---

## üìÇ custom-integrations / `02_retry_–ª–æ–≥–∏–∫–∞.md`

### –ê–ª–≥–æ—Ä–∏—Ç–º Exponential Backoff (–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞)

–ï—Å–ª–∏ CRM –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –Ω–µ –Ω—É–∂–Ω–æ ¬´–¥–æ–ª–±–∏—Ç—å¬ª –µ—ë –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É–ª—É:

–≥–¥–µ ‚Äî –Ω–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏.

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
–ï—Å–ª–∏ —É CRM —É–ø–∞–ª —Å–µ—Ä–≤–µ—Ä, –∏ 1000 –≤–∞—à–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –Ω–∞—á–Ω—É—Ç –µ–∂–µ—Å–µ–∫—É–Ω–¥–Ω–æ –ø–µ—Ä–µ–ø–æ–≤—Ç–æ—Ä—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –≤—ã —É—Å—Ç—Ä–æ–∏—Ç–µ CRM-—Å–∏—Å—Ç–µ–º–µ –Ω–µ–ø—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω—É—é DDoS-–∞—Ç–∞–∫—É, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω–∞ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è ¬´–ø–æ–¥–Ω—è—Ç—å—Å—è¬ª.

---

**–ß—Ç–æ –¥–æ–±–∞–≤–∏–º –¥–∞–ª—å—à–µ?**

1. –ú–æ–≥—É —Ä–∞—Å–ø–∏—Å–∞—Ç—å **—Ç–∞–±–ª–∏—Ü—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤** (Mapping) –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ CRM (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–∞–ø—ã –≤–æ—Ä–æ–Ω–∫–∏ Bitrix –∏ amo).
2. –ú–æ–≥—É —Å–¥–µ–ª–∞—Ç—å —Ñ–∞–π–ª `03_—Å–æ–∑–¥–∞–Ω–∏–µ_—Å–¥–µ–ª–∫–∏.md` –¥–ª—è HubSpot —Å –ø—Ä–∏–º–µ—Ä–æ–º —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –∏—Ö –Ω–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É SDK.
