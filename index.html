<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ��������� ������ -->
    <link rel="stylesheet" href="/src/assets/fonts/fonts.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
  </head>
  <body>
    <div id="app"></div>
    <script type="module">
      import { createApp } from "vue";
      import App from "/src/App.vue";
      import { useDomain } from "/src/composables/getDomain";

      const app = createApp(App);
      app.mount("#app");

      const { stationDomain } = useDomain();

      function updatePageMetadata() {
        const faviconLink = document.createElement("link");
        faviconLink.rel = "icon";
        faviconLink.href = stationDomain.cosmetics.urlLogo || "/favicon.ico";
        faviconLink.type = "image/x-icon";

        const oldFavicon = document.querySelector('link[rel="icon"]');
        if (oldFavicon) {
          document.head.removeChild(oldFavicon);
        }
        document.head.appendChild(faviconLink);

        document.title = stationDomain.cosmetics.titleLogo || "Touch-API";
      }

      if (stationDomain) {
        updatePageMetadata();
      } else {
        const unwatch = app.config.globalProperties.$watch(
          () => stationDomain,
          (newVal) => {
            if (newVal) {
              updatePageMetadata();
              unwatch();
            }
          },
          { deep: true }
        );
      }
    </script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
